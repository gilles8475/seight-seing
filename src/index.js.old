import _ from 'lodash'
import './style.css'
import greeting from './Greeting.js'
import L from 'leaflet'
import 'leaflet/dist/leaflet.css'




function component() {
    const element = document.createElement('div');
    const mapdiv = document.createElement('div');
    mapdiv.id = "map"

    // Lodash, now imported by this script
    element.innerHTML = _.join(['configuration', 'webpack'], ' ');

    element.classList.add('hello');
    mapdiv.classList.add('mapdiv');
    const divGreet = greeting('gilles')
    element.appendChild(divGreet)
    element.appendChild(mapdiv)
    window.onload = () => {
        
        const map = L.map('map');
        const defaultCenter = [38.889269, -77.050176];
        const defaultZoom = 15;

        const basemap = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoiZ2lsbGVzODQ3NSIsImEiOiJjazdmcmtuM2YwNWZrM2VuNjlrbnNldGI3In0.NVN_OrsfDaW6RfsQzwY4jg'
        })
        
        const marker = L.marker([51.5, -0.09]).addTo(map);

        map.setView(defaultCenter, defaultZoom);

        basemap.addTo(map);

        function onMapClick(e) {
            alert("You clicked the map at " + e.latlng);
        }
        
        map.on('click', onMapClick);
        
    }


    return element;
}

document.body.appendChild(component());